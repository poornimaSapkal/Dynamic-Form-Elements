<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display|Source+Code+Pro:400,700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="index.css">
    <script src="index.js"></script>
    <title>Document</title>
</head>

<body onload="fetchData()">
    <div id="display_message">
        <a id="chrome_link"
            href="https://www.google.com/chrome/?brand=CHBD&gclid=CjwKCAjwxaXtBRBbEiwAPqPxcLXo81BiQn53PBSO_-DOpsGe0xjv7nD2TJQCDW0r8-9W0viC1fWthBoCuPAQAvD_BwE&gclsrc=aw.ds"
            style="display: none;">Download Chrome</a>
    </div>
    <div id="toggle_div">
        <span id="welcome_message"></span>
        <h3 id="toggle_message" onclick="toggle()">Toggle Dataset</h3>
    </div>
    <h1>Where will your choices take you?</h1>
    <div id="options_div"></div>
    <div id="heart_div">
        <h2>‚ù§</h2>
    </div>
    <div class="container">
        <form style="display: none;" id="newsletter" action="">
            <h3>Sign up to receive newsletters!</h3>
            <ul>
                <li>
                    <label for="name">Name:</label>
                    <input required class="changeStyle" type="text" name="" id="person_name" placeholder="John Doe">
                </li>
                <li>
                    <label for="email_id">Email ID:</label>
                    <input class="changeStyle" oninvalid="showEmailError();" id="person_email" type="email"
                        name="email_id" placeholder="john.doe@gmail.com" required
                        pattern="^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$">
                </li>
                <li>
                    <button onclick="storeCookie()" class="submit" type="submit">Submit</button>
                </li>
            </ul>
        </form>
    </div>

    <script src="cookies.js"></script>
    <script src="browserDetect.js"></script>
    <script>
        let userName = cookies.getCookie("user_name");
        let anon = "Stranger"
        if (!userName) {
            createWelcomeMessage(anon)
        } else {
            createWelcomeMessage(userName);
        }
        function storeCookie() {
            let personName = document.getElementById("person_name").value
            cookies.setCookie("user_name", personName)
        }

        function createWelcomeMessage(userName) {
            let hEle = document.createElement("h3");
            let text = document.createTextNode("Hi, " + userName + "!");
            let span = document.getElementById("welcome_message");
            let mainDiv = document.getElementById("toggle_div");
            hEle.appendChild(text);
            span.appendChild(hEle);
            mainDiv.appendChild(span)
        }
    </script>
</body>

</html>